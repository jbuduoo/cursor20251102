<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <title>互動式決策樹｜創意實驗遊戲</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          displayMath: [['$$', '$$'], ['\\[', '\\]']]
        }
      };
    </script>
    <style>
      :root {
        color-scheme: light;
        --bg: #f6f9fc;
        --panel: #ffffff;
        --border: #d9e2ec;
        --text: #1f2933;
        --muted: #52606d;
        --node-internal-bg: #1976d2;
        --node-internal-color: #ffffff;
        --node-leaf-bg: #ff9800;
        --node-leaf-color: #ffffff;
        --connector: #9aa5b1;
        --shadow: 0 12px 25px rgba(15, 23, 42, 0.08);
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: "Segoe UI", "Noto Sans TC", sans-serif;
        background: linear-gradient(160deg, #f6f9fc 0%, #eef3fb 100%);
        color: var(--text);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: clamp(1rem, 2vw, 2.5rem);
      }

      main {
        width: min(1100px, 100%);
        background: var(--panel);
        border-radius: 28px;
        padding: clamp(1.5rem, 3vw, 3rem);
        box-shadow: var(--shadow);
        display: flex;
        flex-direction: column;
        gap: clamp(1.5rem, 2.5vw, 2.5rem);
      }

      .article-card {
        background: linear-gradient(140deg, rgba(234, 244, 255, 0.92), rgba(219, 229, 244, 0.85));
        border: 1px solid rgba(30, 64, 175, 0.12);
        border-radius: 22px;
        padding: clamp(1.5rem, 2.8vw, 2.5rem);
        display: flex;
        flex-direction: column;
        gap: 1.25rem;
        color: #1c2a43;
        box-shadow: 0 20px 45px rgba(15, 23, 42, 0.08);
      }

      .article-card h1 {
        font-size: clamp(1.6rem, 2.6vw, 2.1rem);
        margin: 0;
        color: #0f295c;
        display: flex;
        align-items: center;
        gap: 0.6rem;
      }

      .article-card h1 span {
        font-size: clamp(1.6rem, 2.6vw, 2.1rem);
      }

      .article-card p,
      .article-card li {
        line-height: 1.7;
        color: #22314f;
      }

      .article-divider {
        border: none;
        height: 1px;
        background: linear-gradient(90deg, rgba(79, 124, 219, 0.1), rgba(79, 124, 219, 0.35), rgba(79, 124, 219, 0.1));
        margin: 0;
      }

      .article-section h2 {
        font-size: clamp(1.2rem, 2.1vw, 1.55rem);
        margin: 0 0 0.6rem;
        color: #1a2f63;
      }

      .dataset-box {
        background: rgba(79, 124, 219, 0.08);
        border: 1px solid rgba(79, 124, 219, 0.18);
        border-radius: 16px;
        padding: 1rem 1.2rem;
        display: flex;
        flex-direction: column;
        gap: 0.8rem;
      }

      .dataset-header {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        justify-content: space-between;
        align-items: center;
      }

      .dataset-switch {
        appearance: none;
        border: none;
        border-radius: 999px;
        padding: 0.55rem 1.3rem;
        font-size: 0.92rem;
        font-weight: 600;
        cursor: pointer;
        color: #ffffff;
        background: linear-gradient(135deg, #365edc, #4f7cdb);
        box-shadow: 0 8px 18px rgba(79, 124, 219, 0.25);
        transition: transform 0.15s ease, box-shadow 0.15s ease;
      }

      .dataset-switch:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 22px rgba(79, 124, 219, 0.35);
      }

      .dataset-table {
        width: 100%;
        border-collapse: collapse;
        border-radius: 14px;
        overflow: hidden;
        box-shadow: 0 10px 20px rgba(15, 23, 42, 0.08);
        font-size: 0.88rem;
      }

      .dataset-table th {
        background: linear-gradient(135deg, #3358cc 0%, #25419c 100%);
        color: #ffffff;
        padding: 0.55rem 0.75rem;
        text-align: left;
      }

      .dataset-table td {
        background: rgba(255, 255, 255, 0.95);
        color: #1f2d4f;
        padding: 0.55rem 0.75rem;
        border-bottom: 1px solid rgba(79, 124, 219, 0.12);
      }

      .dataset-table tbody tr:nth-child(odd) td {
        background: rgba(235, 241, 255, 0.85);
      }

      .dataset-json {
        display: none;
        background: #0f172a;
        color: #f8fafc;
        padding: 1rem 1.2rem;
        border-radius: 14px;
        font-family: "JetBrains Mono", "Fira Code", Consolas, monospace;
        font-size: 0.88rem;
        line-height: 1.7;
        overflow-x: auto;
        box-shadow: 0 12px 24px rgba(15, 23, 42, 0.35);
      }

      .dataset-box[data-view="json"] .dataset-table {
        display: none;
      }

      .dataset-box[data-view="json"] .dataset-json {
        display: block;
      }

      .article-illustration {
        display: flex;
        flex-direction: column;
        gap: 0.6rem;
        align-items: center;
        padding: 1.5rem 1rem;
        background: rgba(237, 242, 255, 0.7);
        border-radius: 18px;
        border: 1px solid rgba(79, 124, 219, 0.18);
        margin-top: 1.4rem;
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.65);
      }

      .article-illustration svg {
        width: min(560px, 100%);
        height: auto;
      }

      .article-illustration-caption {
        font-size: 0.9rem;
        color: #1f3467;
        text-align: center;
      }

      .article-table {
        width: 100%;
        border-collapse: collapse;
        border-radius: 16px;
        overflow: hidden;
        box-shadow: 0 14px 28px rgba(15, 23, 42, 0.08);
      }

      .article-table th,
      .article-table td {
        padding: 0.85rem 1rem;
        text-align: left;
        font-size: 0.95rem;
        background: rgba(255, 255, 255, 0.9);
      }

      .article-table thead {
        background: linear-gradient(135deg, #2d64d8 0%, #1a46a0 100%);
        color: #ffffff;
      }

      .article-table tbody tr:nth-child(every odd) {
        background: rgba(235, 241, 255, 0.75);
      }

      .article-code {
        background: #0f172a;
        color: #f8fafc;
        padding: 1rem 1.25rem;
        border-radius: 14px;
        font-family: "JetBrains Mono", "Fira Code", Consolas, monospace;
        font-size: 0.9rem;
        line-height: 1.75;
        overflow-x: auto;
        box-shadow: 0 12px 24px rgba(15, 23, 42, 0.35);
      }

      .article-highlight {
        background: rgba(79, 124, 219, 0.12);
        border-left: 4px solid #4f7cdb;
        padding: 0.85rem 1rem;
        border-radius: 10px;
        font-size: 0.92rem;
        color: #1d2f5f;
      }

      .article-list {
        padding-left: 1.1rem;
        display: grid;
        gap: 0.45rem;
      }

      .article-list li {
        list-style: disc;
      }

      .article-subheading {
        font-weight: 700;
        color: #1b3d82;
        margin-bottom: 0.25rem;
      }

      .article-table tbody tr:nth-child(odd) td {
        background: rgba(235, 241, 255, 0.85);
      }

      .article-table tbody tr:nth-child(even) td {
        background: rgba(248, 250, 255, 0.9);
      }

      .article-table td:last-child {
        font-weight: 600;
      }

      .tab-group {
        display: flex;
        flex-direction: column;
        gap: 0.9rem;
      }

      .tab-buttons {
        display: flex;
        flex-wrap: wrap;
        gap: 0.6rem;
      }

      .tab-btn {
        appearance: none;
        border: none;
        border-radius: 8px;
        padding: 0.45rem 1.1rem;
        font-size: 0.9rem;
        font-weight: 600;
        cursor: pointer;
        background: rgba(79, 124, 219, 0.12);
        color: #1a2f63;
        transition: background 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
      }

      .tab-btn:hover {
        background: rgba(79, 124, 219, 0.22);
        transform: translateY(-1px);
        box-shadow: 0 6px 12px rgba(79, 124, 219, 0.18);
      }

      .tab-btn.active {
        background: linear-gradient(135deg, #2f63d5, #4a7ce6);
        color: #ffffff;
        box-shadow: 0 8px 20px rgba(47, 99, 213, 0.3);
      }

      .tab-pane {
        display: none;
        padding: 1rem 1.25rem;
        border-radius: 14px;
        background: rgba(244, 248, 255, 0.85);
        border: 1px solid rgba(79, 124, 219, 0.16);
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.6);
        display: none;
      }

      .tab-pane.active {
        display: block;
      }

      .tab-pane p {
        margin-top: 0;
        color: #1f2d4f;
        line-height: 1.6;
      }

      .tab-diagram {
        display: flex;
        justify-content: center;
        padding: 0.5rem 0 0.8rem;
      }

      .tab-diagram svg {
        width: min(420px, 100%);
        height: auto;
      }

      .tab-insight {
        margin-top: 0.75rem;
        background: rgba(47, 99, 213, 0.08);
        border-left: 4px solid rgba(47, 99, 213, 0.7);
        padding: 0.75rem 1rem;
        border-radius: 10px;
        color: #193059;
        font-size: 0.92rem;
        line-height: 1.6;
      }

      .mini-tree {
        display: grid;
        gap: 0.85rem;
      }

      .mini-tree svg {
        width: min(380px, 100%);
        height: auto;
        margin: 0 auto;
        display: block;
      }

      .mini-tree-note {
        display: flex;
        gap: 0.6rem;
        align-items: flex-start;
        padding: 0.7rem 0.85rem;
        border-radius: 12px;
        background: rgba(79, 124, 219, 0.12);
        border: 1px solid rgba(79, 124, 219, 0.18);
        color: #1a2f63;
        font-size: 0.9rem;
        line-height: 1.5;
      }

      .mini-tree-note strong {
        font-size: 1rem;
      }

      header {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }

      header h1 {
        margin: 0;
        font-size: clamp(1.75rem, 3vw, 2.5rem);
        font-weight: 700;
        color: #12355b;
      }

      header p {
        margin: 0;
        color: var(--muted);
        line-height: 1.6;
        font-size: clamp(0.95rem, 1.4vw, 1.05rem);
      }

      .controls {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        align-items: center;
        background-color: rgba(25, 118, 210, 0.07);
        padding: 1rem 1.25rem;
        border-radius: 18px;
        border: 1px solid rgba(25, 118, 210, 0.1);
      }

      .controls label {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.95rem;
      }

      .controls input[type="file"] {
        font-size: 0.95rem;
      }

      .btn {
        appearance: none;
        border: none;
        border-radius: 999px;
        padding: 0.65rem 1.4rem;
        font-size: 0.95rem;
        font-weight: 600;
        cursor: pointer;
        color: #ffffff;
        background: linear-gradient(135deg, #1976d2, #2196f3);
        box-shadow: 0 6px 14px rgba(33, 150, 243, 0.25);
        transition: transform 0.15s ease, box-shadow 0.15s ease;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 18px rgba(33, 150, 243, 0.35);
      }

      .legend {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        font-size: 0.9rem;
        color: var(--muted);
      }

      .legend-item {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
      }

      .legend-node {
        width: 16px;
        height: 16px;
        border-radius: 4px;
        position: relative;
      }

      .legend-node.internal {
        background: var(--node-internal-bg);
      }

      .legend-node.leaf {
        background: var(--node-leaf-bg);
        border-radius: 999px;
      }

      .tree-wrapper {
        width: 100%;
        overflow-x: auto;
        padding-bottom: 0.5rem;
      }

      .tree {
        margin: 0 auto;
        width: fit-content;
        min-width: min(680px, 100%);
      }

      .tree,
      .tree ul {
        position: relative;
        list-style: none;
        padding: 0;
        margin: 0;
      }

      .tree ul {
        padding-top: 1.5rem;
        display: flex;
        justify-content: center;
        gap: clamp(1.5rem, 3vw, 3.5rem);
        flex-wrap: wrap;
      }

      .tree li {
        position: relative;
        padding: 0;
        text-align: center;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1rem;
      }

      .tree li::before,
      .tree li::after {
        content: "";
        position: absolute;
        top: 0;
        border-top: 2px solid var(--connector);
        width: 50%;
        height: 1.5rem;
      }

      .tree li::before {
        left: -50%;
      }

      .tree li::after {
        right: -50%;
      }

      .tree li:only-child::before,
      .tree li:only-child::after {
        display: none;
      }

      .tree li:first-child::before,
      .tree li:last-child::after {
        border: 0 none;
      }

      .tree li:last-child::before {
        border-right: 2px solid var(--connector);
        border-radius: 0 0 10px 0;
      }

      .tree li.root::before,
      .tree li.root::after {
        display: none;
      }

      .tree li:first-child::after {
        border-left: 2px solid var(--connector);
        border-radius: 0 0 0 10px;
      }

      .tree li .edge-label {
        position: absolute;
        top: -0.75rem;
        transform: translateY(-40%);
        color: var(--muted);
        font-size: 0.8rem;
        white-space: nowrap;
        background: rgba(255, 255, 255, 0.85);
        padding: 0.2rem 0.55rem;
        border-radius: 999px;
        border: 1px solid rgba(154, 165, 177, 0.25);
        backdrop-filter: blur(6px);
      }

      .node {
        position: relative;
        padding: 0.9rem 1.6rem;
        font-size: 1rem;
        min-width: 10rem;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.6rem;
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        user-select: none;
        text-align: center;
        line-height: 1.4;
      }

      .node.internal {
        background: var(--node-internal-bg);
        color: var(--node-internal-color);
        border-radius: 12px;
        box-shadow: 0 8px 18px rgba(25, 118, 210, 0.25);
      }

      .node.leaf {
        background: var(--node-leaf-bg);
        color: var(--node-leaf-color);
        border-radius: 999px;
        padding: 0.9rem 1.3rem;
        min-width: 8rem;
        box-shadow: 0 8px 18px rgba(255, 152, 0, 0.2);
      }

      .node:hover {
        transform: translateY(-3px);
      }

      .node::after {
        content: attr(data-tooltip);
        position: absolute;
        pointer-events: none;
        opacity: 0;
        transition: opacity 0.2s ease, transform 0.2s ease;
        transform: translate(-50%, -10px);
        left: 50%;
        bottom: calc(100% + 0.5rem);
        background: rgba(33, 33, 33, 0.88);
        color: #ffffff;
        padding: 0.4rem 0.65rem;
        border-radius: 6px;
        font-size: 0.82rem;
        white-space: nowrap;
        z-index: 10;
      }

      .node:hover::after {
        opacity: 1;
        transform: translate(-50%, -6px);
      }

      .node.collapsible::before {
        content: attr(data-state);
        font-feature-settings: "tnum";
        font-size: 0.8rem;
        font-weight: 600;
        letter-spacing: 0.05em;
        text-transform: uppercase;
        position: absolute;
        top: -1.3rem;
        right: 0.8rem;
        padding: 0.15rem 0.55rem;
        background: rgba(255, 255, 255, 0.28);
        border-radius: 999px;
        color: inherit;
      }

      .collapsed > ul {
        display: none;
      }

      .tree ul ul li::before,
      .tree ul ul li::after {
        border-color: rgba(154, 165, 177, 0.6);
      }

      .empty-state {
        text-align: center;
        color: var(--muted);
        font-size: 0.95rem;
        background: rgba(148, 163, 184, 0.08);
        border: 1px dashed rgba(148, 163, 184, 0.35);
        border-radius: 16px;
        padding: 2rem;
      }

      @media (max-width: 768px) {
        .tree ul {
          flex-direction: column;
          align-items: center;
          gap: 2rem;
        }

        .tree {
          min-width: unset;
        }

        .tree li::before,
        .tree li::after,
        .tree li:first-child::after,
        .tree li:last-child::before {
          display: none;
        }

        .tree li {
          gap: 0.5rem;
        }

        .tree ul > li > ul {
          padding-top: 1rem;
        }

        .tree li .edge-label {
          position: static;
          transform: none;
          border-radius: 8px;
        }
      }
    </style>
  </head>
  <body>
    <main>
      <section class="article-card">
        <h1><span>🌳</span>決策樹（Decision Tree）概念與結構詳解</h1>
        <p>
          決策樹是一種直觀且強大的監督式機器學習演算法，能夠處理分類與迴歸任務。它像流程圖般，
          依據特徵條件逐步分割資料，每一次判斷（節點）將資料導向下一個條件或最終的決策結果。
        </p>
        <hr class="article-divider" />

        <div class="article-section">
          <h2>I. 什麼是決策樹</h2>
          這是一張決策樹模型圖。它展示了如何根據一系列「是」或「否」的條件（綠色/藍色方塊）來一步步判斷，最終將輸入的數據分配到不同的類別（橙色橢圓）。每個數據點從頂部開始，沿著符合自身條件的路徑往下走，直到到達一個葉節點，即得到其最終的分類結果。這是機器學習中常用的分類方法。
          <div class="article-illustration">
            <img 
              src="decision-tree.png.png" 
              alt="決策樹結構示意圖" 
              style="width: 100%; max-width: 600px; height: auto; display: block; margin: 0 auto;"
            />

            <div style="margin-top: 1.5rem; padding: 1.2rem; background: rgba(33, 150, 243, 0.08); border-left: 4px solid #2196f3; border-radius: 10px;">
              <p style="margin: 0 0 0.8rem 0; font-weight: 600; color: #1565c0; font-size: 1rem;">
                📋 決策樹結構說明：
              </p>
              <ul style="margin: 0; padding-left: 1.5rem; color: #1f2d4f; line-height: 1.8; font-size: 0.95rem;">
                <li><strong>樹根（條件1）</strong>：決策流程的起點，代表完整資料集與首要判斷條件。</li>
                <li><strong>內部節點（條件2、條件3、條件4）</strong>：對單一特徵進行的判斷測試，每個節點會根據判斷結果分支到下一層節點或葉節點。</li>
                <li><strong>分支標籤（是/否）</strong>：表示判斷條件的結果，引導資料流向不同的路徑。</li>
                <li><strong>葉節點（類別1～類別5）</strong>：不再分支的終點，輸出最終的分類或預測值。每個葉節點代表一個決策結果。</li>
                <li><strong>決策路徑</strong>：從根節點到葉節點的完整路徑，代表一組判斷規則。例如「條件1=是 → 條件2=是 → 類別1」。</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="article-section">
          <h2>II. 如何訓練模型</h2>
          <div class="dataset-box" id="examDatasetBox" data-view="table">
            <div class="dataset-header">
              <div>
                <span class="article-subheading">1. 準備資料</span>
                <p style="margin: 0; color: #2b3c65; font-size: 0.92rem;">
                  將醫療診斷資料整理成特徵（症狀）與標籤（診斷結果），方便決策樹演算法讀取與學習。
                </p>
              </div>
              <button type="button" class="dataset-switch" id="datasetSwitchBtn">
                切換為 JSON
              </button>
            </div>
            <table class="dataset-table">
              <thead>
                <tr>
                  <th>症狀</th>
                  <th>喉嚨痛</th>
                  <th>流鼻水</th>
                  <th>發燒</th>
                  <th>疲勞感</th>
                  <th>診斷</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>1</td>
                  <td>輕微</td>
                  <td>是</td>
                  <td>無</td>
                  <td>輕微</td>
                  <td>輕度感冒</td>
                </tr>
                <tr>
                  <td>2</td>
                  <td>輕微</td>
                  <td>是</td>
                  <td>無</td>
                  <td>無</td>
                  <td>輕度感冒</td>
                </tr>
                <tr>
                  <td>3</td>
                  <td>嚴重</td>
                  <td>是</td>
                  <td>有</td>
                  <td>嚴重</td>
                  <td>感冒/需就醫</td>
                </tr>
                <tr>
                  <td>4</td>
                  <td>嚴重</td>
                  <td>是</td>
                  <td>有</td>
                  <td>輕微</td>
                  <td>感冒/需就醫</td>
                </tr>
                <tr>
                  <td>5</td>
                  <td>無</td>
                  <td>否</td>
                  <td>無</td>
                  <td>無</td>
                  <td>健康</td>
                </tr>
                <tr>
                  <td>6</td>
                  <td>無</td>
                  <td>是</td>
                  <td>無</td>
                  <td>無</td>
                  <td>過敏</td>
                </tr>
                <tr>
                  <td>7</td>
                  <td>無</td>
                  <td>是</td>
                  <td>無</td>
                  <td>輕微</td>
                  <td>過敏</td>
                </tr>
                <tr>
                  <td>8</td>
                  <td>輕微</td>
                  <td>否</td>
                  <td>無</td>
                  <td>無</td>
                  <td>健康</td>
                </tr>
                <tr>
                  <td>9</td>
                  <td>嚴重</td>
                  <td>否</td>
                  <td>有</td>
                  <td>嚴重</td>
                  <td>其他狀況/需就醫</td>
                </tr>
                <tr>
                  <td>10</td>
                  <td>輕微</td>
                  <td>是</td>
                  <td>有</td>
                  <td>輕微</td>
                  <td>感冒/需就醫</td>
                </tr>
                <tr>
                  <td>11</td>
                  <td>無</td>
                  <td>否</td>
                  <td>有</td>
                  <td>嚴重</td>
                  <td>其他狀況/需就醫</td>
                </tr>
                <tr>
                  <td>12</td>
                  <td>輕微</td>
                  <td>否</td>
                  <td>無</td>
                  <td>輕微</td>
                  <td>健康</td>
                </tr>
              </tbody>
            </table>
            <pre class="dataset-json" id="datasetJsonBlock">[
  { "symptom": 1, "soreThroat": "輕微", "runnyNose": "是", "fever": "無", "fatigue": "輕微", "diagnosis": "輕度感冒" },
  { "symptom": 2, "soreThroat": "輕微", "runnyNose": "是", "fever": "無", "fatigue": "無", "diagnosis": "輕度感冒" },
  { "symptom": 3, "soreThroat": "嚴重", "runnyNose": "是", "fever": "有", "fatigue": "嚴重", "diagnosis": "感冒/需就醫" },
  { "symptom": 4, "soreThroat": "嚴重", "runnyNose": "是", "fever": "有", "fatigue": "輕微", "diagnosis": "感冒/需就醫" },
  { "symptom": 5, "soreThroat": "無", "runnyNose": "否", "fever": "無", "fatigue": "無", "diagnosis": "健康" },
  { "symptom": 6, "soreThroat": "無", "runnyNose": "是", "fever": "無", "fatigue": "無", "diagnosis": "過敏" },
  { "symptom": 7, "soreThroat": "無", "runnyNose": "是", "fever": "無", "fatigue": "輕微", "diagnosis": "過敏" },
  { "symptom": 8, "soreThroat": "輕微", "runnyNose": "否", "fever": "無", "fatigue": "無", "diagnosis": "健康" },
  { "symptom": 9, "soreThroat": "嚴重", "runnyNose": "否", "fever": "有", "fatigue": "嚴重", "diagnosis": "其他狀況/需就醫" },
  { "symptom": 10, "soreThroat": "輕微", "runnyNose": "是", "fever": "有", "fatigue": "輕微", "diagnosis": "感冒/需就醫" },
  { "symptom": 11, "soreThroat": "無", "runnyNose": "否", "fever": "有", "fatigue": "嚴重", "diagnosis": "其他狀況/需就醫" },
  { "symptom": 12, "soreThroat": "輕微", "runnyNose": "否", "fever": "無", "fatigue": "輕微", "diagnosis": "健康" }
]</pre>
          </div>
          <div>
            <p class="article-subheading">2. 將資料轉為可訓練的格式</p>
            <ul class="article-list" style="margin: 0;">
              <li><strong>A. 確認目的（目標欄位）</strong>：標籤向量 <code>y</code>，對應「診斷」。</li>
              <li><strong>B. 整理特徵</strong>：視需要將類別轉數值，形成特徵矩陣 <code>X</code>。</li>
            </ul>
            <pre class="article-code"># 拆分特徵 (X) 與標籤 (y)
X = [
  ["輕微", "是", "無", "輕微"],
  ["輕微", "是", "無", "無"],
  ["嚴重", "是", "有", "嚴重"],
  ["嚴重", "是", "有", "輕微"],
  ["無", "否", "無", "無"],
  ["無", "是", "無", "無"],
  ["無", "是", "無", "輕微"],
  ["輕微", "否", "無", "無"],
  ["嚴重", "否", "有", "嚴重"],
  ["輕微", "是", "有", "輕微"],
  ["無", "否", "有", "嚴重"],
  ["輕微", "否", "無", "輕微"]
]

y = ["輕度感冒", "輕度感冒", "感冒/需就醫", "感冒/需就醫", "健康", "過敏", "過敏", "健康", "其他狀況/需就醫", "感冒/需就醫", "其他狀況/需就醫", "健康"]</pre>
          </div>
          <div>
            <p class="article-subheading">3. 將類別特徵轉為數值</p>
            <p style="margin-bottom: 0.8rem; color: #1f2d4f; font-size: 0.95rem;">
              使用 Scikit-learn 的 <code>OrdinalEncoder</code> 進行標準化特徵工程，這比手動映射更可靠且易於維護。
            </p>
            <pre class="article-code">from sklearn.preprocessing import OrdinalEncoder
import numpy as np

# 原始類別資料（從步驟2）
X_raw = [
  ["輕微", "是", "無", "輕微"],
  ["輕微", "是", "無", "無"],
  ["嚴重", "是", "有", "嚴重"],
  ["嚴重", "是", "有", "輕微"],
  ["無", "否", "無", "無"],
  ["無", "是", "無", "無"],
  ["無", "是", "無", "輕微"],
  ["輕微", "否", "無", "無"],
  ["嚴重", "否", "有", "嚴重"],
  ["輕微", "是", "有", "輕微"],
  ["無", "否", "有", "嚴重"],
  ["輕微", "否", "無", "輕微"]
]

# 使用 OrdinalEncoder 自動編碼
encoder = OrdinalEncoder()
X = encoder.fit_transform(X_raw)

# 編碼後的數值對應關係：
# 喉嚨痛: 無=0, 輕微=1, 嚴重=2
# 流鼻水: 否=0, 是=1
# 發燒: 無=0, 有=1
# 疲勞感: 無=0, 輕微=1, 嚴重=2

# 診斷標籤（保持字串格式，決策樹可處理）
y = ["輕度感冒", "輕度感冒", "感冒/需就醫", "感冒/需就醫", "健康", "過敏", "過敏", "健康", "其他狀況/需就醫", "感冒/需就醫", "其他狀況/需就醫", "健康"]

print("編碼後的 X 矩陣：")
print(X)
print("\n編碼器類別映射：")
for i, feature_name in enumerate(["喉嚨痛", "流鼻水", "發燒", "疲勞感"]):
    print(f"{feature_name}: {encoder.categories_[i]}")</pre>
            <div class="tab-insight" style="margin-top: 0.75rem;">
              <strong>說明：</strong>使用 <code>OrdinalEncoder</code> 的優點包括：自動處理類別編碼、保持編碼一致性、易於處理新資料，且無需手動維護映射表。
            </div>
          </div>
          <div>
            <p class="article-subheading">4. 使用 Scikit-learn 訓練決策樹模型</p>
            <div class="tab-group" data-tab-group>
              <div class="tab-buttons">
                <button type="button" class="tab-btn active" data-tab-target="tab-overall">
                  整體模型
                </button>
                <button type="button" class="tab-btn" data-tab-target="tab-concept">
                  💡 根節點的選擇原則
                </button>
                <button type="button" class="tab-btn" data-tab-target="tab-code">
                  💻 Python 訓練與解讀
                </button>
                <button type="button" class="tab-btn" data-tab-target="tab-math">
                  📊 數學基礎：熵與資訊增益
                </button>
              </div>
              <div class="tab-pane active" id="tab-overall">
                <p>
                  以完整特徵矩陣 <code>X</code> 訓練模型，使用資訊熵（entropy）衡量資訊增益，
                  找出最佳的分割規則。
                </p>
                <div class="tab-diagram">
                  <svg viewBox="0 0 420 200" role="img" aria-label="醫療診斷決策樹">
                    <defs>
                      <style>
                        .node-box { fill:#1c6cd5; stroke:#0f3d91; stroke-width:3; rx:14; ry:14; }
                        .node-circle { fill:#ff9800; stroke:#ce6a00; stroke-width:3; }
                        .node-text { font-family:"Segoe UI","Noto Sans TC",sans-serif; font-size:16px; fill:#ffffff; font-weight:600; }
                        .edge-text { font-family:"Segoe UI","Noto Sans TC",sans-serif; font-size:13px; fill:#42516f; font-weight:600; }
                        .connector { stroke:#6b7a99; stroke-width:2.6; }
                      </style>
                    </defs>
                    <rect class="node-box" x="150" y="18" width="120" height="46"></rect>
                    <text class="node-text" x="210" y="47" text-anchor="middle">發燒</text>

                    <rect class="node-box" x="60" y="96" width="120" height="46"></rect>
                    <text class="node-text" x="120" y="125" text-anchor="middle">流鼻水</text>

                    <rect class="node-box" x="240" y="96" width="120" height="46"></rect>
                    <text class="node-text" x="300" y="125" text-anchor="middle">疲勞感</text>

                    <circle class="node-circle" cx="30" cy="96" r="28"></circle>
                    <text class="node-text" x="30" y="103" text-anchor="middle">健康</text>

                    <circle class="node-circle" cx="80" cy="174" r="28"></circle>
                    <text class="node-text" x="80" y="182" text-anchor="middle">過敏</text>

                    <circle class="node-circle" cx="160" cy="174" r="28"></circle>
                    <text class="node-text" x="160" y="182" text-anchor="middle">輕度感冒</text>

                    <circle class="node-circle" cx="300" cy="174" r="28"></circle>
                    <text class="node-text" x="300" y="182" text-anchor="middle">感冒/需就醫</text>

                    <circle class="node-circle" cx="380" cy="174" r="28"></circle>
                    <text class="node-text" x="380" y="182" text-anchor="middle">其他狀況/需就醫</text>

                    <line class="connector" x1="210" y1="64" x2="120" y2="96"></line>
                    <line class="connector" x1="210" y1="64" x2="300" y2="96"></line>
                    <line class="connector" x1="210" y1="64" x2="30" y2="96"></line>

                    <line class="connector" x1="120" y1="142" x2="80" y2="174"></line>
                    <line class="connector" x1="120" y1="142" x2="160" y2="174"></line>
                    <line class="connector" x1="300" y1="142" x2="300" y2="174"></line>
                    <line class="connector" x1="300" y1="142" x2="380" y2="174"></line>

                    <text class="edge-text" x="75" y="78" text-anchor="middle">無</text>
                    <text class="edge-text" x="165" y="86" text-anchor="middle">有</text>
                    <text class="edge-text" x="320" y="80" text-anchor="middle">有</text>
                    <text class="edge-text" x="80" y="162" text-anchor="middle">是</text>
                    <text class="edge-text" x="160" y="162" text-anchor="middle">否</text>
                    <text class="edge-text" x="298" y="162" text-anchor="middle">輕微</text>
                    <text class="edge-text" x="378" y="162" text-anchor="middle">嚴重</text>
                  </svg>
                </div>
                <pre class="article-code">from sklearn.tree import DecisionTreeClassifier, export_text
from sklearn.preprocessing import OrdinalEncoder

# 重新定義訓練資料（確保與 feature_names 吻合）
X_raw = [
  ["輕微", "是", "無", "輕微"],
  ["輕微", "是", "無", "無"],
  ["嚴重", "是", "有", "嚴重"],
  ["嚴重", "是", "有", "輕微"],
  ["無", "否", "無", "無"],
  ["無", "是", "無", "無"],
  ["無", "是", "無", "輕微"],
  ["輕微", "否", "無", "無"],
  ["嚴重", "否", "有", "嚴重"],
  ["輕微", "是", "有", "輕微"],
  ["無", "否", "有", "嚴重"],
  ["輕微", "否", "無", "輕微"]
]

encoder = OrdinalEncoder()
X = encoder.fit_transform(X_raw)

y = ["輕度感冒", "輕度感冒", "感冒/需就醫", "感冒/需就醫", "健康", "過敏", "過敏", "健康", "其他狀況/需就醫", "感冒/需就醫", "其他狀況/需就醫", "健康"]

# 訓練模型
clf = DecisionTreeClassifier(criterion="entropy")
clf.fit(X, y)

# 輸出決策樹
print(export_text(clf, feature_names=["喉嚨痛", "流鼻水", "發燒", "疲勞感"]))</pre>
                <pre class="article-code">|--- 發燒 &lt;= 0.50
|    |--- 流鼻水 &lt;= 0.50
|    |    |--- 喉嚨痛 &lt;= 0.50
|    |    |    |--- class: 健康
|    |    |--- 喉嚨痛 &gt;  0.50
|    |         |--- class: 健康
|    |--- 流鼻水 &gt;  0.50
|         |--- 喉嚨痛 &lt;= 0.50
|         |    |--- class: 過敏
|         |--- 喉嚨痛 &gt;  0.50
|              |--- class: 輕度感冒
|--- 發燒 &gt;  0.50
|    |--- 疲勞感 &lt;= 1.50
|    |    |--- class: 感冒/需就醫
|    |--- 疲勞感 &gt;  1.50
|         |--- class: 其他狀況/需就醫</pre>
                <div class="tab-insight">
                  <strong>解讀：</strong>完整模型先看發燒：有發燒時需進一步判斷疲勞感；無發燒時再看流鼻水和喉嚨痛來區分健康、過敏或輕度感冒。
                  <br><br>
                  <strong>數值閾值對應關係：</strong>
                  <ul style="margin: 0.5rem 0 0 1.5rem; padding-left: 0;">
                    <li><code>發燒 &lt;= 0.50</code> 對應於「無發燒」（編碼為 0）</li>
                    <li><code>發燒 &gt; 0.50</code> 對應於「有發燒」（編碼為 1）</li>
                    <li><code>流鼻水 &lt;= 0.50</code> 對應於「否」（編碼為 0）</li>
                    <li><code>流鼻水 &gt; 0.50</code> 對應於「是」（編碼為 1）</li>
                    <li><code>喉嚨痛 &lt;= 0.50</code> 對應於「無」（編碼為 0）</li>
                    <li><code>喉嚨痛 &gt; 0.50</code> 對應於「輕微」（編碼為 1）或「嚴重」（編碼為 2）</li>
                    <li><code>疲勞感 &lt;= 1.50</code> 對應於「無」（編碼為 0）或「輕微」（編碼為 1）</li>
                    <li><code>疲勞感 &gt; 1.50</code> 對應於「嚴重」（編碼為 2）</li>
                  </ul>
                </div>
              </div>
              <div class="tab-pane" id="tab-concept">
                <h3 style="margin-top: 0; color: #1565c0; font-size: 1.3rem;">💡 決策樹的起點：根節點的選擇原則</h3>
                <p>
                  決策樹的目標是將數據集分割成<strong>純度最高的子集</strong>，即每個子集中的類別盡可能一致。為了達到這個目標，演算法需要選擇最能有效區分類別的特徵作為根節點。
                </p>
                
                <div style="margin: 1.5rem 0;">
                  <h4 style="color: #1a237e; font-size: 1.1rem; margin-bottom: 0.8rem;">核心概念：不純度 (Impurity) 與資訊增益 (Information Gain)</h4>
                  <ul style="margin: 0; padding-left: 1.5rem; color: #1f2d4f; line-height: 1.8;">
                    <li><strong>不純度 (Impurity)</strong>：衡量數據集中類別混雜程度的指標。當一個子集中所有樣本都屬於同一類別時，不純度為 0（完全純淨）。</li>
                    <li><strong>資訊增益 (Information Gain)</strong>：衡量某個特徵分割後，數據集不純度降低的程度。資訊增益越大，表示該特徵越能有效區分類別。</li>
                    <li><strong>熵 (Entropy)</strong>：在我們的程式碼中使用 <code>criterion="entropy"</code>，這是一種計算不純度的方式。熵值越高，數據集越混雜；熵值為 0 時，數據集完全純淨。</li>
                  </ul>
                </div>

                <div style="margin: 1.5rem 0;">
                  <h4 style="color: #1a237e; font-size: 1.1rem; margin-bottom: 0.8rem;">根節點的選擇過程</h4>
                  <p style="color: #1f2d4f; line-height: 1.8;">
                    決策樹演算法會<strong>測試所有特徵</strong>，計算每個特徵分割後的資訊增益：
                  </p>
                  <ol style="margin: 0.8rem 0 0 1.5rem; padding-left: 0; color: #1f2d4f; line-height: 1.8;">
                    <li>對每個特徵（如「喉嚨痛」、「流鼻水」、「發燒」、「疲勞感」），計算分割後的資訊增益</li>
                    <li>比較所有特徵的資訊增益值</li>
                    <li>選擇<strong>資訊增益最大</strong>的特徵作為根節點</li>
                  </ol>
                </div>

                <div class="tab-insight">
                  <strong>結論：</strong>演算法會測試所有特徵，選出能帶來最大資訊增益的特徵作為根節點。這解釋了為什麼 Scikit-learn 最終會選擇某個症狀（如「發燒」）作為第一層判斷，因為它能最有效地將數據集分割成純度較高的子集。
                </div>
              </div>
              <div class="tab-pane" id="tab-code">
                <h3 style="margin-top: 0; color: #1565c0; font-size: 1.3rem;">💻 使用 Python 訓練與解讀樹結構</h3>
                
                <div style="margin: 1.5rem 0;">
                  <h4 style="color: #1a237e; font-size: 1.1rem; margin-bottom: 0.8rem;">資料準備確認</h4>
                  <p style="color: #1f2d4f; line-height: 1.8;">
                    將「喉嚨痛」、「流鼻水」、「發燒」、「疲勞感」等類別特徵轉換為數值，使用 <code>OrdinalEncoder</code> 進行標準化編碼（如前面步驟所示）。
                  </p>
                </div>

                <div style="margin: 1.5rem 0;">
                  <h4 style="color: #1a237e; font-size: 1.1rem; margin-bottom: 0.8rem;">訓練模型</h4>
                  <pre class="article-code">from sklearn.tree import DecisionTreeClassifier, export_text
from sklearn.preprocessing import OrdinalEncoder

# 訓練資料準備
X_raw = [
  ["輕微", "是", "無", "輕微"],
  ["輕微", "是", "無", "無"],
  ["嚴重", "是", "有", "嚴重"],
  ["嚴重", "是", "有", "輕微"],
  ["無", "否", "無", "無"],
  ["無", "是", "無", "無"],
  ["無", "是", "無", "輕微"],
  ["輕微", "否", "無", "無"],
  ["嚴重", "否", "有", "嚴重"],
  ["輕微", "是", "有", "輕微"],
  ["無", "否", "有", "嚴重"],
  ["輕微", "否", "無", "輕微"]
]

encoder = OrdinalEncoder()
X = encoder.fit_transform(X_raw)

y = ["輕度感冒", "輕度感冒", "感冒/需就醫", "感冒/需就醫", "健康", "過敏", "過敏", "健康", "其他狀況/需就醫", "感冒/需就醫", "其他狀況/需就醫", "健康"]

# 使用資訊熵訓練決策樹
clf = DecisionTreeClassifier(criterion="entropy")
clf.fit(X, y)

# 輸出樹結構
print(export_text(clf, feature_names=["喉嚨痛", "流鼻水", "發燒", "疲勞感"]))</pre>
                </div>

                <div style="margin: 1.5rem 0;">
                  <h4 style="color: #1a237e; font-size: 1.1rem; margin-bottom: 0.8rem;">結果解讀</h4>
                  <pre class="article-code">|--- <strong>發燒</strong> &lt;= 0.50  &lt;-- 根節點
|    |--- 流鼻水 &lt;= 0.50
|    |    |--- 喉嚨痛 &lt;= 0.50
|    |    |    |--- class: 健康
|    |    |--- 喉嚨痛 &gt;  0.50
|    |         |--- class: 健康
|    |--- 流鼻水 &gt;  0.50
|         |--- 喉嚨痛 &lt;= 0.50
|         |    |--- class: 過敏
|         |--- 喉嚨痛 &gt;  0.50
|              |--- class: 輕度感冒
|--- 發燒 &gt;  0.50
|    |--- 疲勞感 &lt;= 1.50
|    |    |--- class: 感冒/需就醫
|    |--- 疲勞感 &gt;  1.50
|         |--- class: 其他狀況/需就醫</pre>
                </div>

                <div class="tab-insight">
                  <strong>結論：</strong>程式碼結果證明了演算法選擇了<strong>「發燒」</strong>作為最主要的判斷依據（根節點）。這表示在我們的醫療診斷資料中，「發燒」這個特徵能帶來最大的資訊增益，最有效地將數據集分割成純度較高的子集。
                </div>
              </div>
              <div class="tab-pane" id="tab-math">
                <h3 style="margin-top: 0; color: #1565c0; font-size: 1.3rem;">📊 數學基礎：如何量化特徵的決策能力？</h3>
                
                <div style="margin: 1.5rem 0;">
                  <h4 style="color: #1a237e; font-size: 1.1rem; margin-bottom: 0.8rem;">熵 (Entropy) 定義</h4>
                  <p style="color: #1f2d4f; line-height: 1.8; margin-bottom: 0.8rem;">
                    熵 $E(S)$ 衡量數據集 $S$ 的不純度，公式如下：
                  </p>
                  <div style="background: rgba(33, 150, 243, 0.08); border-left: 4px solid #2196f3; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                    <p style="margin: 0; font-size: 1.1rem; text-align: center; font-family: 'Times New Roman', serif;">
                      $$E(S) = - \sum_{i=1}^{c} p_i \log_2(p_i)$$
                    </p>
                  </div>
                  <p style="color: #1f2d4f; line-height: 1.8;">
                    其中 $c$ 是類別數量，$p_i$ 是第 $i$ 個類別在數據集中的比例。熵值範圍在 $[0, \log_2(c)]$ 之間：
                  </p>
                  <ul style="margin: 0.8rem 0 0 1.5rem; padding-left: 0; color: #1f2d4f; line-height: 1.8;">
                    <li>熵值為 0：數據集完全純淨（所有樣本屬於同一類別）</li>
                    <li>熵值越大：數據集越混雜（類別分布越均勻）</li>
                  </ul>
                </div>

                <div style="margin: 1.5rem 0;">
                  <h4 style="color: #1a237e; font-size: 1.1rem; margin-bottom: 0.8rem;">資訊增益 (Information Gain) 定義</h4>
                  <p style="color: #1f2d4f; line-height: 1.8; margin-bottom: 0.8rem;">
                    資訊增益 $IG(S, A)$ 衡量特徵 $A$ 帶來的純度提升，公式如下：
                  </p>
                  <div style="background: rgba(33, 150, 243, 0.08); border-left: 4px solid #2196f3; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                    <p style="margin: 0; font-size: 1.1rem; text-align: center; font-family: 'Times New Roman', serif;">
                      $$IG(S, A) = E(S) - \sum_{v \in \text{Values}(A)} \frac{|S_v|}{|S|} E(S_v)$$
                    </p>
                  </div>
                  <p style="color: #1f2d4f; line-height: 1.8;">
                    其中：
                  </p>
                  <ul style="margin: 0.8rem 0 0 1.5rem; padding-left: 0; color: #1f2d4f; line-height: 1.8;">
                    <li>$E(S)$：原始數據集的熵</li>
                    <li>$S_v$：特徵 $A$ 取值為 $v$ 的子集</li>
                    <li>$\frac{|S_v|}{|S|}$：子集 $S_v$ 的權重（樣本數比例）</li>
                    <li>$E(S_v)$：子集 $S_v$ 的熵</li>
                  </ul>
                  <p style="color: #1f2d4f; line-height: 1.8; margin-top: 0.8rem;">
                    資訊增益越大，表示該特徵越能有效降低數據集的不純度。
                  </p>
                </div>

                <div style="margin: 1.5rem 0;">
                  <h4 style="color: #1a237e; font-size: 1.1rem; margin-bottom: 0.8rem;">計算示範：為什麼「發燒」被選為根節點？</h4>
                  <p style="color: #1f2d4f; line-height: 1.8; margin-bottom: 0.8rem;">
                    以「發燒」特徵為例，計算其資訊增益：
                  </p>
                  <div style="background: rgba(244, 248, 255, 0.85); border: 1px solid rgba(79, 124, 219, 0.16); padding: 1.2rem; border-radius: 10px; margin: 1rem 0;">
                    <p style="margin: 0 0 0.8rem 0; color: #1f2d4f; font-weight: 600;">原始數據集 $S$：</p>
                    <p style="margin: 0; color: #1f2d4f; line-height: 1.8;">
                      總樣本數：12 筆<br>
                      類別分布：健康(4)、輕度感冒(2)、過敏(2)、感冒/需就醫(3)、其他狀況/需就醫(1)<br>
                      原始熵 $E(S) = -\left(\frac{4}{12}\log_2\frac{4}{12} + \frac{2}{12}\log_2\frac{2}{12} + \frac{2}{12}\log_2\frac{2}{12} + \frac{3}{12}\log_2\frac{3}{12} + \frac{1}{12}\log_2\frac{1}{12}\right) \approx 2.25$
                    </p>
                    <p style="margin: 1rem 0 0.8rem 0; color: #1f2d4f; font-weight: 600;">以「發燒」分割後：</p>
                    <ul style="margin: 0; padding-left: 1.5rem; color: #1f2d4f; line-height: 1.8;">
                      <li><strong>發燒=無（8筆）</strong>：健康(4)、輕度感冒(2)、過敏(2) → 熵 $E(S_{\text{無}}) \approx 1.5$</li>
                      <li><strong>發燒=有（4筆）</strong>：感冒/需就醫(3)、其他狀況/需就醫(1) → 熵 $E(S_{\text{有}}) \approx 0.81$</li>
                    </ul>
                    <p style="margin: 1rem 0 0; color: #1f2d4f; font-weight: 600;">資訊增益：</p>
                    <p style="margin: 0; color: #1f2d4f; line-height: 1.8;">
                      $IG(S, \text{發燒}) = 2.25 - \left(\frac{8}{12} \times 1.5 + \frac{4}{12} \times 0.81\right) \approx 0.73$
                    </p>
                  </div>
                  <p style="color: #1f2d4f; line-height: 1.8; margin-top: 1rem;">
                    當我們計算其他特徵（如「喉嚨痛」、「流鼻水」、「疲勞感」）的資訊增益時，會發現「發燒」的資訊增益最高，因此被選為根節點。
                  </p>
                </div>

                <div class="tab-insight">
                  <strong>結論：</strong>透過數學計算可以證明，在我們的醫療診斷資料中，「發燒」特徵的資訊增益最高，因此 Scikit-learn 選擇它作為根節點。這與程式碼的輸出結果一致，驗證了演算法的正確性。
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="article-section">
          <h2>III. 如何使用決策樹模型</h2>
          <pre class="article-code">if AAA &lt;= 1.5:
    if BBB == "A":
        return "D"
    else:
        return "E"
elif AAA &lt;= 2.5:
    if BBB == "A":
        return "F"
    else:
        return "G"
else:
    if BBB == "A":
        # AAA = 3 且 BBB = "A" 時，可能對應 D 或 F
        return "D" 或 "F"
    else:
        return "E"</pre>
          <ul class="article-list">
            <li><strong>AAA</strong>：主要的分類依據，先決定大方向。</li>
            <li><strong>BBB</strong>：細分同一群組內的差異。</li>
            <li><strong>葉節點（D、E、F、G）</strong>：最終輸出的決策或分類結果。</li>
          </ul>
        </div>
      </section>

    </main>

    <script>
      const defaultTree = {
        title: "期末考時間",
        description: "首要考慮因素",
        type: "internal",
        tooltip: "先判斷期末考的時間狀態",
        children: [
          {
            title: "心情狀態",
            description: "評估現在的心情",
            type: "internal",
            edgeLabel: "臨近",
            tooltip: "當考試臨近時，先評估自己的心情狀態以決定策略",
            children: [
              {
                title: "打籃球",
                description: "舒緩心情",
                edgeLabel: "心情不好",
                type: "leaf",
                tooltip: "心情不好 → 運動放鬆再回來學習",
              },
              {
                title: "學習",
                description: "維持專注",
                edgeLabel: "心情正常",
                type: "leaf",
                tooltip:
                  "保持節奏，充分利用臨近考試的時間進行複習",
              },
            ],
          },
          {
            title: "朋友約遊戲",
            description: "有朋友的遊戲邀約嗎？",
            edgeLabel: "暫無",
            type: "internal",
            tooltip: "沒有考試壓力時轉向社交邀約的考量",
            children: [
              {
                title: "學習",
                description: "保持進度",
                edgeLabel: "無約",
                type: "leaf",
                tooltip: "沒有額外活動 → 可專心複習或預習",
              },
              {
                title: "玩遊戲",
                description: "放鬆交流",
                edgeLabel: "有約",
                type: "leaf",
                tooltip: "把握與朋友相聚的時間，但留意適度",
              },
            ],
          },
          {
            title: "學習",
            description: "時間緊迫，專注應戰",
            edgeLabel: "緊急",
            type: "leaf",
            tooltip: "情況緊急 → 全力衝刺準備考試",
          },
        ],
      };

      const datasetBox = document.getElementById("examDatasetBox");
      const datasetSwitchBtn = document.getElementById("datasetSwitchBtn");

      if (datasetBox && datasetSwitchBtn) {
        datasetSwitchBtn.addEventListener("click", () => {
          const nextView = datasetBox.dataset.view === "table" ? "json" : "table";
          datasetBox.dataset.view = nextView;
          datasetSwitchBtn.textContent =
            nextView === "json" ? "切換為表格" : "切換為 JSON";
        });
      }

      const tabGroups = document.querySelectorAll("[data-tab-group]");
      tabGroups.forEach((group) => {
        const buttons = group.querySelectorAll(".tab-btn");
        const panes = group.querySelectorAll(".tab-pane");

        buttons.forEach((button) => {
          button.addEventListener("click", () => {
            const targetId = button.getAttribute("data-tab-target");

            buttons.forEach((btn) => btn.classList.remove("active"));
            panes.forEach((pane) => pane.classList.remove("active"));

            button.classList.add("active");
            const targetPane = group.querySelector(`#${targetId}`);
            if (targetPane) {
              targetPane.classList.add("active");
            }
          });
        });
      });

    </script>
  </body>
</html>

