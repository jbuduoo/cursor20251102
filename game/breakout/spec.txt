# 打磚塊遊戲規格書

## 遊戲概述
打磚塊（Breakout）是一款經典的街機遊戲，玩家控制擋板反彈球來擊破上方的磚塊，目標是清除所有磚塊以過關。本版本支援多球系統和超高耐久度磚塊。

## 技術規格
- **檔案類型**: HTML5 Canvas 遊戲
- **語言**: HTML5, CSS3, JavaScript (ES6)
- **依賴**: 無（純前端實現）
- **瀏覽器支援**: 所有支援 Canvas 的現代瀏覽器

## 功能特性

### 核心功能
1. **多球系統**
   - 支援多個球同時存在
   - 每秒自動生成新球
   - 球速保持不變（基礎速度 4）

2. **擋板系統**
   - 滑鼠或鍵盤控制移動
   - 擋板會隨著球掉落而變長
   - 最大寬度可達整個畫布寬度
   - 球擊中擋板會改變角度

3. **磚塊系統（超高耐久度）**
   - 磚塊耐久度系統（1-5000 次）
   - 磚塊上顯示當前耐久度數值
   - 擊中磚塊減少耐久度
   - 耐久度歸零後磚塊消失

4. **關卡系統**
   - 支援 100 關
   - 關卡難度遞增
   - 磚塊數量和排列隨關卡變化
   - 第 1 關：5x10 磚塊，耐久度 10
   - 第 50 關：磚塊耐久度 500-1000
   - 第 100 關：最大耐久度可達 5000

5. **生命值系統**
   - 初始生命值：10,000
   - 球掉落扣除 1 生命值
   - 生命值歸零遊戲結束

6. **計分系統**
   - 擊破磚塊獲得 10 分
   - 顯示當前得分、生命值、關卡

### 視覺設計
- 漸層粉紫色背景（#f093fb 到 #f5576c）
- 深色太空風格畫布
- 彩色磚塊（6 種顏色循環）
- 白色發光球
- 藍色擋板

## 遊戲規則

### 基本規則
1. 使用滑鼠或方向鍵控制擋板
2. 球反彈擊破磚塊
3. 球掉落會扣除生命值
4. 清除所有磚塊即可過關
5. 生命值歸零遊戲結束

### 特殊機制
- **每秒生成新球**: 每 1 秒自動在擋板上生成新球
- **擋板變長**: 球掉落時擋板長度 +10 像素（最多到畫布寬度）
- **耐久度系統**: 磚塊需要多次擊中才會消失
- **難度公式**: 最大耐久度 = 50 × (關卡編號 / 10)²

### 得分規則
- 每個磚塊 = 10 分（擊破時）
- 擊中但未擊破不計分

## 操作說明

### 基本操作
1. **控制擋板**:
   - 滑鼠移動: 滑鼠在畫布上移動控制擋板
   - 鍵盤控制: ⬅️ 左方向鍵 / ➡️ 右方向鍵
2. **發射球**: 按空白鍵或點擊畫布發射未啟動的球
3. **查看資訊**: 頂部顯示得分、生命值、關卡

### 控制說明
- 擋板會跟隨滑鼠或鍵盤移動
- 球自動移動，無需手動控制
- 多個球會同時移動

## 技術實現

### 遊戲狀態管理
```javascript
- balls: 球陣列
- bricks: 磚塊陣列（二維）
- paddle: 擋板物件
- score: 當前得分
- lives: 生命值（10,000）
- level: 當前關卡（1-100）
- baseBallSpeed: 基礎球速（4，不變）
```

### 磚塊系統
```javascript
class Brick {
  - durability: 當前耐久度
  - maxDurability: 最大耐久度
  - status: 狀態（1=存在, 0=已摧毀）
  - render(): 繪製磚塊和耐久度數字
  - hit(): 減少耐久度
}
```

### 關卡管理
```javascript
class LevelManager {
  - calculate_max_durability(level): 計算最大耐久度
  - getRandomDurability(level): 獲取隨機耐久度
}
```

### 耐久度公式
- 第 1 關: 固定 10
- 第 50 關: 隨機 500-1000
- 其他關卡: 根據公式計算
- 公式: `50 × (level / 10)²`，最大 5000

### 碰撞檢測
- 球與牆壁碰撞
- 球與擋板碰撞（角度計算）
- 球與磚塊碰撞
- 球與底部碰撞（扣生命值）

### 自動生成機制
- 每 1 秒檢查是否需要生成新球
- 從現有球中選擇參考球
- 新球繼承速度並略微改變角度

## 檔案結構
```
breakout.html
├── HTML 結構
│   ├── 標題區
│   ├── 遊戲資訊顯示
│   ├── Canvas 畫布
│   └── 控制說明
├── CSS 樣式
│   ├── 響應式佈局
│   ├── 漸層背景
│   └── 訊息顯示
└── JavaScript 邏輯
    ├── Brick 類別
    ├── LevelManager 類別
    ├── 多球系統
    ├── 碰撞檢測
    ├── 自動生成機制
    └── 關卡管理
```

## 關卡難度設計

### 關卡分佈
- **第 1-10 關**: 5 行 x 10 列（50 磚塊）
- **第 11-30 關**: 6 行 x 12 列（72 磚塊）
- **第 31-60 關**: 7 行 x 14 列（98 磚塊）
- **第 61-100 關**: 8 行 x 16 列（128 磚塊）

### 磚塊排列
- 第 2 關開始移除部分邊緣磚塊
- 第 3 關及以上更複雜的排列
- 移除部分磚塊增加挑戰性

### 耐久度分佈
- 第 1 關: 所有磚塊耐久度 10
- 第 2-49 關: 線性增長，範圍根據最大耐久度計算
- 第 50 關: 特殊設定，500-1000 隨機
- 第 51-100 關: 快速增長，範圍為最大值的 50%-100%

## 未來擴展建議
1. 添加特殊磚塊（加分、減速、加球等）
2. 添加特殊球（爆炸球、穿透球等）
3. 添加關卡選擇功能
4. 添加暫停功能
5. 添加音效和背景音樂
6. 添加成就系統
7. 添加排行榜
8. 添加觸控支援優化

## 版本資訊
- **版本**: 2.0（超高耐久度版本）
- **最後更新**: 2024
- **作者**: AI Generated

## 修改記錄
請參考 `breakout_log.txt` 查看詳細修改記錄。

