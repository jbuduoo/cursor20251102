# 互動活動管理系統規格書

## 工具概述
互動活動管理系統是一個純前端的即時問答與回饋收集工具，支援主持人建立活動、參與者即時參與，無需後端伺服器。使用 localStorage 儲存數據，透過 URL 參數共享房間 ID 實現活動連接。

## 技術規格
- **檔案類型**: HTML5 單頁應用
- **語言**: HTML5, CSS3, JavaScript (ES6)
- **依賴**: 無（純前端實現）
- **瀏覽器支援**: 現代瀏覽器（Chrome, Edge, Safari, Firefox）
- **數據儲存**: localStorage
- **同步機制**: 輪詢（每 2 秒）

## 功能特性

### 主持人儀表板（host-dashboard.html）
1. **建立新活動**
   - 即時問答（Q&A）：建立選擇題問答活動
     - 活動標題
     - 問題列表（每個問題包含：問題文字、4 個選項、正確答案）
   - 即時回饋（Feedback）：建立匿名回饋收集活動
     - 活動標題
     - 回饋提示文字

2. **活動管理**
   - 顯示所有已建立的活動
   - 每個活動卡片顯示：
     - 活動標題
     - 活動類型（問答/回饋）
     - 建立時間
   - 每個活動提供三個操作按鈕：
     - 主持遊戲（Host Game）：啟動活動，進入主持頁面
     - 編輯（Edit）：修改活動內容
     - 刪除（Delete）：移除活動（需確認）

### 主持遊戲頁面（host-game.html）
1. **問答模式**
   - 顯示當前問題和選項
   - 顯示即時統計（各選項選擇人數）
   - 顯示即時排行榜（前 10 名）
   - 控制按鈕：
     - 上一題
     - 下一題
     - 結束活動
   - 顯示參與者總數

2. **回饋模式**
   - 顯示所有回饋訊息列表
   - 每則回饋顯示：
     - 回饋內容
     - 提交時間
     - 已讀/未讀狀態
   - 操作按鈕：
     - 標記已讀/未讀
     - 刪除回饋
     - 清除所有回饋
     - 結束活動

### 參與者頁面（participant.html）
1. **問答模式**
   - 顯示當前問題和選項
   - 選擇答案按鈕
   - 顯示即時排行榜（前 10 名）
   - 顯示自己的分數和排名
   - 自動同步（每 2 秒）

2. **回饋模式**
   - 回饋輸入框
   - 提交回饋按鈕
   - 顯示所有回饋列表（僅顯示內容和時間，不顯示提交者）
   - 自動同步（每 2 秒）

## 數據結構

### 活動列表（activity_list）
```javascript
{
  "activities": [
    {
      "id": "ABC123",
      "title": "AI知識問答",
      "type": "qa", // "qa" 或 "feedback"
      "createdAt": "2024-11-07T10:00:00Z"
    }
  ]
}
```

### 問答活動資料（activity_${roomId}）
```javascript
{
  "id": "ABC123",
  "title": "AI知識問答",
  "type": "qa",
  "status": "active", // "active", "paused", "ended"
  "currentQuestion": 0, // 當前問題索引
  "createdAt": "2024-11-07T10:00:00Z",
  "questions": [
    {
      "id": 1,
      "question": "什麼是 AI？",
      "options": ["選項A", "選項B", "選項C", "選項D"],
      "correctAnswer": 0, // 正確答案索引
      "responses": {
        "0": 5, // 選項A有5人選擇
        "1": 3,
        "2": 2,
        "3": 1
      }
    }
  ],
  "leaderboard": [
    {
      "participantId": "user1",
      "score": 10,
      "name": "參與者1"
    }
  ],
  "participants": {
    "user1": { "name": "參與者1", "joinedAt": "2024-11-07T10:05:00Z" }
  }
}
```

### 回饋活動資料（activity_${roomId}）
```javascript
{
  "id": "ABC123",
  "title": "意見回饋收集",
  "type": "feedback",
  "status": "active",
  "createdAt": "2024-11-07T10:00:00Z",
  "prompt": "請分享您的意見或問題",
  "feedbacks": [
    {
      "id": 1699345200000,
      "text": "這是一個很好的活動",
      "timestamp": "2024-11-07T10:10:00Z",
      "read": false
    }
  ]
}
```

## 頁面流程

1. **建立活動**
   - 主持人進入 host-dashboard.html
   - 選擇「建立問答」或「建立回饋」
   - 填寫活動資訊
   - 系統生成房間 ID（6 位英數字）
   - 儲存到 localStorage

2. **主持活動**
   - 主持人點擊「主持遊戲」
   - 進入 host-game.html?room=ABC123
   - 參與者透過 URL 進入 participant.html?room=ABC123

3. **同步機制**
   - 參與者頁面每 2 秒輪詢一次 localStorage
   - 主持人操作立即更新 localStorage
   - 參與者透過輪詢取得更新

## 視覺設計
- 漸層紫色背景（#667eea 到 #764ba2，與專案風格一致）
- 白色卡片容器，圓角設計
- 響應式佈局
- 清晰的按鈕和狀態提示
- 使用圖示增強視覺效果

## 檔案結構
```
interactive-activity/
├── spec.txt                    # 規格書（本檔案）
├── README.md                   # 使用說明
├── interactive-activity_log.txt # 修改記錄
├── activity-manager.js        # 活動管理邏輯（共用）
├── host-dashboard.html        # 主持人儀表板（主頁）
├── host-game.html             # 主持遊戲頁面
└── participant.html           # 參與者頁面
```

## 功能細節

### 房間 ID 生成
- 6 位英數字組合（大寫）
- 使用 Math.random() 生成
- 確保唯一性（檢查是否已存在）

### 參與者 ID 生成
- 使用時間戳 + 隨機數生成
- 儲存在 sessionStorage 中
- 同一瀏覽器會話中保持相同

### 排行榜排序
- 按分數降序排列
- 分數相同時按提交時間排序
- 只顯示前 10 名

### 數據驗證
- 活動標題不能為空
- 問答活動至少需要 1 個問題
- 每個問題至少需要 2 個選項
- 回饋內容不能為空

## 錯誤處理
- 房間不存在時顯示錯誤訊息
- 活動已結束時顯示提示
- localStorage 儲存失敗時顯示警告
- 無效的 URL 參數時重定向到儀表板

## 未來擴展建議
1. 匯出活動結果（JSON/CSV）
2. 活動模板功能
3. 問題計時功能
4. 更多問題類型（多選題、填空題）
5. 活動歷史記錄
6. 數據視覺化（圖表）

